<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
		<script src="preact.20170215.js"></script>
		<script>
			pReact.ready();
		</script>
		<style>
			body{background:#f4f5f7;font-family:微软雅黑;}
			body,ul, p,h1,h2,h3,h4,h5,h6{list-style:none;padding:0;margin:0;}
		</style>
	</head>
	<body>
		<div id="page"></div>
		<script type="text/pReact">
			let baseFontSize = window.baseFontSize || pReact.getBaseFontSize();

			var styles = pReact.createStyle({
				clearfix:{
				    content: ".",
				    display: "block",
				    clear: "both",
				    overflow:"hidden"
				},
				show:{
					display:"block"
				},
				hide:{
					display:"hidden"
				},
				scrollView:{
					marginTop:(20/baseFontSize).toFixed(4)+"rem",
					fontSize:(12/baseFontSize).toFixed(4)+"rem",
					padding:(10/baseFontSize).toFixed(4)+"rem",
					background: "rgb(255,255,255)"
				},
				scrollViewItems:{
					marginBottom:(10/baseFontSize).toFixed(4)+"rem"
				},
				scrollViewItemsLast:{
					marginBottom:0
				},
				scrollViewItemLeft:{
					float:"left",
					border:(1/baseFontSize).toFixed(4)+"rem solid #ccc"
				},
				scrollViewItemRight:{
					float:"left",
					width:((screen.width - 135)/baseFontSize).toFixed(4)+"rem",
					marginLeft:(12/baseFontSize).toFixed(4)+"rem"
				},
				scrollViewItemLeftImg:{
					width:(100/baseFontSize).toFixed(4)+"rem"
				},
				scrollViewItemTitle:{
					fontWeight:400
				},
				scrollViewItemTitleLink:{
					textDecoration: "none",
					color:"rgb(0,0,0)"
				},
				scrollViewItemAside:{
					margin:(10/baseFontSize).toFixed(4)+"rem 0 0"
				},
				scrollViewItemAsideItem:{
					marginRight:(10/baseFontSize).toFixed(4)+"rem",
					color: "#999",
					display:"inline-block",
					lineHeight:(20/baseFontSize).toFixed(4)+"rem"
				},
				scrollViewItemAsideLast:{
					marginRight:0,
					float:"right"
				}
			});

			var scrollView = pReact.createClass('scrollView', {
				render(){
					return (
						<div style={styles.clearfix}{styles.scrollView}>
							<ul id="{{id}}">
								<scrollview_items></scrollview_items>
							</ul>
						</div>
					);
				}
			}),
			scrollview_items = pReact.createClass("scrollview_items", {
				getInitData(success, error){
					success([{
						title: "央行：外商投资企业可以正常办理利润汇出",
						url: "",
						img: "https://minimg.hexun.com/i3.hexun.com/2013-07-02/155695724_c162x117.jpg",
						source: "中国证券网",
						time: "02-28",
						commentCount: 11,
						commentId: 2017
					},{
						title: "央行：外商投资企业可以正常办理利润汇出",
						url: "",
						img: "https://minimg.hexun.com/i3.hexun.com/2013-07-02/155695724_c162x117.jpg",
						source: "中国证券网",
						time: "02-28",
						commentCount: 11,
						commentId: 2017
					},{
						title: "央行：外商投资企业可以正常办理利润汇出",
						url: "",
						img: "https://minimg.hexun.com/i3.hexun.com/2013-07-02/155695724_c162x117.jpg",
						source: "中国证券网",
						time: "02-28",
						commentCount: 11,
						commentId: 2017
					},{
						title: "央行：外商投资企业可以正常办理利润汇出",
						url: "",
						img: "https://minimg.hexun.com/i3.hexun.com/2013-07-02/155695724_c162x117.jpg",
						source: "中国证券网",
						time: "02-28",
						commentCount: 11,
						commentId: 2017
					},{
						title: "央行：外商投资企业可以正常办理利润汇出",
						url: "",
						img: "https://minimg.hexun.com/i3.hexun.com/2013-07-02/155695724_c162x117.jpg",
						source: "中国证券网",
						time: "02-28",
						commentCount: 11,
						commentId: 2017
					}])
				},
				handleClick(e){
					console.log(this.getAttribute("data-id"))
				},
				render(){
					let a = document.createDocumentFragment(), i=0, then = this;
					then._data && then._data.data.forEach((n) => {
						i+=1;
						a.appendChild(i == then._data.length ? pReact.tmpl((
							<li style={styles.clearfix}{styles.scrollViewItems}{styles.scrollViewItemsLast}>
								<a href="{{url}}" style={styles.scrollViewItemLeft}{styles.show}>
									<img data-src="{{img}}" alt="{{title}}" style={styles.scrollViewItemLeftImg} />
								</a>
								<article style={styles.scrollViewItemRight}>
									<h1 style={styles.scrollViewItemTitle}><a href="{{url}}" style={styles.scrollViewItemTitleLink}>{{title}}</a></h1>
									<p style={styles.scrollViewItemAside}>
										<span style={styles.scrollViewItemAsideItem}>{{source}}</span>
										<span style={styles.scrollViewItemAsideItem}>{{time}}</span>
										<span style={styles.scrollViewItemAsideItem}{styles.scrollViewItemAsideLast} data-id="{{commentId}}" onclick={handleClick}>评论：{{commentCount}}</span>
									</p>
								</article>
							</li>
						), n) : pReact.tmpl((
							<li style={styles.clearfix}{styles.scrollViewItems}>
								<a href="{{url}}" style={styles.scrollViewItemLeft}{styles.show}>
									<img data-src="{{img}}" alt="{{title}}" style={styles.scrollViewItemLeftImg} />
								</a>
								<article style={styles.scrollViewItemRight}>
									<h1 style={styles.scrollViewItemTitle}><a href="{{url}}" style={styles.scrollViewItemTitleLink}>{{title}}</a></h1>
									<p style={styles.scrollViewItemAside}>
										<span style={styles.scrollViewItemAsideItem}>{{source}}</span>
										<span style={styles.scrollViewItemAsideItem}>{{time}}</span>
										<span style={styles.scrollViewItemAsideItem}{styles.scrollViewItemAsideLast} data-id="{{commentId}}" onclick={handleClick}>评论：{{commentCount}}</span>
									</p>
								</article>
							</li>
						), n))
					});
					return a;
				}
			});

			pReact.renderDom(
				<scrollView id="scrollviewitems"/>,
				document.getElementById("page")
			);
			pReact.renderDom(
				<scrollView id="scrollviewitems"/>,
				document.getElementById("page")
			);
			pReact.renderDom(
				<scrollView id="scrollviewitems"/>,
				document.getElementById("page")
			);
			pReact.renderDom(
				<scrollView id="scrollviewitems"/>,
				document.getElementById("page")
			);
		</script>
	</body>
</html>
